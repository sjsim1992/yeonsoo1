<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>02_6_시설예약정보_미래관5층</title>
    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="stylesheet" href="../assets/css/room.css">
    <link  rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" />
</head>

<body>

      
 <div class="wrap">

     <header>
         <div class="logo"><img src="../assets/images/logo.png"></div>
         <ul class="gnb">
             <li class="active"><a href="">연수관리</a></li>
             <li><a href="">시설관리</a></li>
             <li><a href="">시간표 관리</a></li>
             <li><a href="">회원관리</a></li>
             <li><a href="">개인정보 접속 이력 관리</a></li>
         </ul>
     </header>

     <div class="container">

         <div class="lnbWrap">
             <div class="pageTitle">연수정보</div>
             <ul class="location">
                 <li>home</li>
                 <li>연수관리</li>
                 <li>연수등록</li>
             </ul>
             <ul class="lnb">
                 <li><a href="">연수 기본정보</a></li>
                 <li><a href="">식당 정보</a></li>
                 <li class="active"><a href="">시설 예약 정보</a></li>
                 <li><a href="">숙소 예약 정보</a></li>
                 <li><a href="">연수생 정보</a></li>
             </ul>
         </div>




         <!-- contents 안에 각 컨텐츠가 들어감 ! -->
         <div class="contents">

             <div class="tabBoxWrap">
                 <button type="button" class="active">
                     <div>미래관 2층</div>
                 </button>
                 <button type="button">
                     <div>미래관 3층</div>
                 </button>
                 <button type="button">
                     <div>미래관 4층</div>
                 </button>
                 <button type="button">
                     <div>미래관 5층</div>
                 </button>
                 <button type="button">
                     <div>미래관 6층</div>
                 </button>
             </div>

             <br><br><br><br>



            <!-- 내용시작 -->
            <div class="facility-booking">


                <select class="selectBox">
                    <option>2025-00-00</option>
                </select>

                <select class="selectBox">
                    <option>오후2시</option>
                </select>


                <br><br>


                <div class="map-with-list">

                    <!-- 공간 리스트 -->
                    <ul class="room-list">
                        <li data-ho="200호">
                            <a href="javascript:;">
                                <p class="name-set">
                                    <span class="name">배움홀</span>
                                    <span class="ho">200호</span>
                                </p>
                                <p class="status booked">예약완료</p>
                            </a>
                        </li>
                        <li data-ho="201호">
                            <a href="javascript:;">
                                <p class="name-set">
                                    <span class="name">나눔홀</span>
                                    <span class="ho">201호</span>
                                </p>
                                <p class="status available">예약가능</p>
                            </a>
                        </li>
                        <li data-ho="202호">
                            <a href="javascript:;">
                               <p class="name-set">
                                    <span class="name">아람홀</span>
                                    <span class="ho">202호</span>
                                </p>
                                <p class="status available">예약가능</p>
                            </a>
                        </li>
                        <li data-ho="203호">
                            <a href="javascript:;">
                               <p class="name-set">
                                    <span class="name">서희홀</span>
                                    <span class="ho">203호</span>
                                </p>
                                <p class="status booked">예약완료</p>
                            </a>
                        </li>
                    </ul>
                    <!-- /공간 리스트 -->


                    <!-- 지도 영역 -->
                    <div class="map-wrapper">
                        <div class="map-container">
                            <div class="map-background"></div>
                            <!-- JS가 아래를 생성 -->
                        </div>
                    </div>
                    <!-- /지도 영역 -->

                </div>



                <!-- 시설 예약하기 표 -->
                <div class="info_table" style="display: none;">
                    <h3>시설 예약하기</h3>
                    <table class="basicTBL">
                        <thead>
                            <tr>
                                <th>일자</th>
                                <th>이용시간</th>
                                <th>건물명</th>
                                <th>층</th>
                                <th>구분</th>
                                <th>실명</th>
                                <th>호수</th>
                                <th>예약상태</th>
                                <th>관리</th>
                            </tr>
                        </thead>
                        <tbody id="bookingInfoBody">
                            <!-- JS로 채움 -->
                        </tbody>
                    </table>

                    <p class="mt5">※ 시설 안내도에서 시설(실명) 클릭 시 시설 예약 정보가 표시 되며, 예약가능 상태일 경우 [예약하기]를 클릭하여 시설 예약이 가능 합니다. </p>
                </div>
                <!-- /시설 예약하기 표 -->


                <!-- 시설 예약정보 표 -->
                <div class="booking-details">
                    <h3>시설 예약정보</h3>
                    <table class="basicTBL mt10">
                        <thead>
                            <tr>
                                <th>일자</th>
                                <th>이용시간</th>
                                <th>건물명</th>
                                <th>층</th>
                                <th>구분</th>
                                <th>실명</th>
                                <th>호수</th>
                                <th>예약상태</th>
                                <th>관리</th>
                            </tr>
                        </thead>
                        <tbody>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td><a href="#" class="btn_cancle_small">예약취소</a></td>
                        </tbody>
                    </table>
                </div>
                <!-- /시설 예약정보 표 -->

                <div class="btn-set end mt20">
                    <a href="#" class="btn_basic">목록</a>
                </div>


            </div>
            <!-- /내용끝-->


    

         </div>
         <!-- //contents END -->
     </div>
     <!-- //container END -->






 </div>


    







    

<script>



document.addEventListener("DOMContentLoaded", function () {

  const mapList = document.querySelector(".room-list");
  const mapBox = document.querySelector(".map-container");
  const infoTable = document.querySelector(".info_table");



  // 지도 위에 포인트 복제
  const clonedMapList = mapList.cloneNode(true);
  clonedMapList.classList.add("map-overlay");



  // 위치 지정용 맵
  const positionMap = {
    "200호": { top: "104px", left: "175px" },
    "201호": { top: "147px", left: "695px" },
    "202호": { top: "229px", left: "666px" },
    "203호": { top: "292px", left: "547px" },
  };



  // 각 li에 위치 적용
  clonedMapList.querySelectorAll("li").forEach((li) => {
    const ho = li.getAttribute("data-ho");
    if (positionMap[ho]) {
      li.style.top = positionMap[ho].top;
      li.style.left = positionMap[ho].left;
    }
  });

  mapBox.appendChild(clonedMapList);



  // 클릭 이벤트 - 리스트와 지도 둘 다
  [mapList, clonedMapList].forEach((list) => {
    list.addEventListener("click", function (event) {
      const li = event.target.closest("li");
      if (!li) return;
      event.preventDefault();

      const ho = li.getAttribute("data-ho");

      syncActiveClasses(ho);
      updateInfoTable(li);
    });
  });



  function syncActiveClasses(ho) {
    const allItems = [
      ...mapList.querySelectorAll("li"),
      ...clonedMapList.querySelectorAll("li"),
    ];
    allItems.forEach((item) => {
      item.classList.toggle("active", item.getAttribute("data-ho") === ho);
    });
  }

  function updateInfoTable(item) {
  const name = item.querySelector(".name")?.innerText || "";
  const ho = item.querySelector(".ho")?.innerText || "";
  const statusText = item.querySelector(".status")?.innerText || "";

  let statusClass = "";
  if (statusText === "예약완료") {
    statusClass = "booked";
  } else if (statusText === "예약가능") {
    statusClass = "available";
  }

  const infoTable = document.querySelector(".info_table");
  const tbody = document.getElementById("bookingInfoBody");

  // 내용 업데이트
  tbody.innerHTML = `
    <tr>
      <td></td> 
      <td></td>  
      <td></td>  
      <td></td>  
      <td></td>    
      <td>${name}</td>
      <td>${ho}</td>
      <td><span class="tdStatus ${statusClass}">${statusText}</span></td>
      <td><a href="#" class="btn_save_small">예약하기</a></td>  
    </tr>
  `;

  // 표시하기
  infoTable.style.display = "block";
}

});







</script>







</body>
</html>